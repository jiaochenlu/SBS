<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Experiment Detail - Search NDCG Experiment</title>
    <link rel="stylesheet" href="experiment-detail.css">
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="header-content">
            <div class="experiment-info">
                <h1 class="experiment-title">Search NDCG Experiment</h1>
                <div class="experiment-meta">
                    <span class="status-badge status-active">Active</span>
                    <span>Created: March 15, 2024</span>
                    <span>Owner: John Smith</span>
                    <span>247 queries</span>
                </div>
            </div>
            <div class="header-actions">
                <button class="btn-header" onclick="toggleConfigurationPanel()">üìã Configuration</button>
                <button class="btn-header" onclick="cloneExperiment()">üìã Clone</button>
                <button class="btn-header btn-danger-header" onclick="deleteExperiment()">üóëÔ∏è Delete</button>
            </div>
        </div>
    </header>

    <!-- Content Wrapper with matching background -->
    <div class="content-wrapper">
        <!-- Overview Section -->
        <div class="overview-section">
            <div class="content-container">
                <!-- Progress Section -->
                <div class="section-card progress-overview-card">
                    <div class="section-header progress-header">
                        <h3>Progress Overview</h3>
                        <div class="progress-percentage">247 Total Queries</div>
                    </div>
                    <div class="progress-container">
                        <div class="progress-bar-segmented">
                            <div class="progress-segment completed" style="width: 76.5%" title="189 Completed (76.5%)"></div>
                            <div class="progress-segment in-progress" style="width: 9.3%" title="23 In Progress (9.3%)"></div>
                            <div class="progress-segment not-started" style="width: 14.2%" title="35 Not Started (14.2%)"></div>
                        </div>
                        <div class="progress-stats-row">
                            <div class="progress-stats">
                                <div class="progress-stat-item completed">
                                    <span class="stat-dot"></span>
                                    <span class="stat-text">189 Completed (76.5%)</span>
                                </div>
                                <div class="progress-stat-item in-progress">
                                    <span class="stat-dot"></span>
                                    <span class="stat-text">23 In Progress (9.3%)</span>
                                </div>
                                <div class="progress-stat-item not-started">
                                    <span class="stat-dot"></span>
                                    <span class="stat-text">35 Not Started (14.2%)</span>
                                </div>
                            </div>
                            <div class="judges-info">
                                <span class="judges-icon">üë•</span>
                                <span class="stat-text">4 Judges</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Navigation Tabs -->
        <div class="tab-navigation">
            <div class="tab-container">
                <button class="tab-button active" data-tab="queries" onclick="switchTab('queries')">
                    Queries
                    <span class="tab-badge">247</span>
                </button>
                <button class="tab-button" data-tab="results" onclick="switchTab('results')">
                    Results
                </button>
                <button class="tab-button" data-tab="members" onclick="switchTab('members')">
                    Members
                    <span class="tab-badge">4</span>
                </button>
            </div>
        </div>

        <!-- Main Content with Right Panel Layout -->
        <div class="main-content-wrapper">
            <div class="main-content">
        
        <!-- Queries Tab -->
        <div id="queries-tab" class="tab-content active">
            <div class="content-container">
                <div class="section-header">
                    <div class="header-left">
                        <h3>Query Management</h3>
                        <div class="header-actions">
                            <button class="btn-primary" id="assignJudgesBtn" onclick="assignQueries()">Assign Judges</button>
                            <button class="btn-secondary" onclick="importQueries()">Import Queries</button>
                        </div>
                    </div>
                </div>

                <!-- Filters and Search -->
                <div class="filters-section">
                    <div class="search-box">
                        <input type="text" placeholder="Search queries..." class="search-input">
                        <button class="search-btn">üîç</button>
                    </div>
                    <div class="filter-buttons">
                        <select class="filter-select">
                            <option value="">All Status</option>
                            <option value="completed">Completed</option>
                            <option value="in-progress">In Progress</option>
                            <option value="not-started">Not Started</option>
                        </select>
                        <select class="filter-select">
                            <option value="">All Judges</option>
                            <option value="john-smith">John Smith</option>
                            <option value="alice-miller">Alice Miller</option>
                            <option value="robert-johnson">Robert Johnson</option>
                        </select>
                    </div>
                </div>

                <!-- Query List -->
                <div class="query-list-container">
                    <div class="query-list-header">
                        <div class="checkbox-column">
                            <input type="checkbox" id="selectAll" onchange="toggleSelectAll()">
                        </div>
                        <div class="query-column">Query</div>
                        <div class="assignments-column">Assignments</div>
                        <div class="status-column">Overall Status</div>
                        <div class="progress-column">Progress</div>
                        <div class="last-judged-column">Last Judged At</div>
                    </div>
                    
                    <div class="query-list-body" id="queryListBody">
                        <!-- Query items will be dynamically loaded here -->
                    </div>
                </div>

                <!-- Pagination -->
                <div class="pagination">
                    <button class="pagination-btn" onclick="previousPage()">‚Üê Previous</button>
                    <span class="pagination-info">Page 1 of 10</span>
                    <button class="pagination-btn" onclick="nextPage()">Next ‚Üí</button>
                </div>
            </div>
        </div>

        <!-- Members Tab -->
        <div id="members-tab" class="tab-content">
            <div class="content-container">
                <div class="section-header">
                    <h3>Team Members</h3>
                    <div class="header-actions">
                        <button class="btn-primary" onclick="addMember()">Add Member</button>
                        <button class="btn-secondary" onclick="manageMembers()">Manage Members</button>
                    </div>
                </div>

                <!-- Members List -->
                <div class="members-grid">
                    <!-- Members will be dynamically loaded here -->
                </div>

                <!-- Add Member Modal -->
                <div id="addMemberModal" class="modal" style="display: none;">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h3>Add New Member</h3>
                            <button class="modal-close" onclick="closeAddMemberModal()">&times;</button>
                        </div>
                        <div class="modal-body">
                            <div class="form-group">
                                <label>Email Address</label>
                                <input type="email" class="form-control" placeholder="Enter email address">
                            </div>
                            <div class="form-group">
                                <label>Role</label>
                                <select class="form-control" id="roleSelect">
                                    <!-- Options will be populated dynamically based on current user role -->
                                </select>
                            </div>
                        </div>
                        <div class="modal-footer">
                            <button class="btn-secondary" onclick="closeAddMemberModal()">Cancel</button>
                            <button class="btn-primary" onclick="addMemberSubmit()">Add Member</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Results Tab -->
        <div id="results-tab" class="tab-content">
            <div class="content-container">
                <div class="section-header">
                    <h3>Annotation Results</h3>
                    <div class="header-actions">
                        <button class="btn-secondary" onclick="downloadReport()">Download Report</button>
                        <button class="btn-primary" onclick="exportData()">Export Data</button>
                    </div>
                </div>

                <!-- Results Summary -->
                <div class="results-summary">
                    <div class="summary-card">
                        <div class="summary-title">Inter-Annotator Agreement</div>
                        <div class="summary-value">87.3%</div>
                    </div>
                    <div class="summary-card">
                        <div class="summary-title">Average Completion Time</div>
                        <div class="summary-value">2.3 min</div>
                    </div>
                    <div class="summary-card">
                        <div class="summary-title">Quality Score</div>
                        <div class="summary-value">9.1/10</div>
                    </div>
                </div>

                <!-- Charts Section -->
                <div class="charts-section">
                    <div class="chart-container">
                        <h4>Completion Progress Over Time</h4>
                        <div class="chart-placeholder">üìà Chart will be rendered here</div>
                    </div>
                    <div class="chart-container">
                        <h4>Answer Distribution</h4>
                        <div class="chart-placeholder">üìä Chart will be rendered here</div>
                    </div>
                </div>
            </div>
        </div>

            <!-- Right Panel for Configuration -->
            <div class="right-panel" id="configurationPanel">
                <div class="right-panel-header">
                    <h3>Experiment Configuration</h3>
                    <button class="panel-close" onclick="toggleConfigurationPanel()">&times;</button>
                </div>
                <div class="right-panel-body">
                    <div class="config-section">
                        <h4>Experiment Type</h4>
                        <div class="config-item">
                            <span class="config-label">Selected Type:</span>
                            <span class="config-value">Search NDCG experiment</span>
                        </div>
                    </div>

                    <div class="config-section">
                        <h4>Basic Information</h4>
                        <div class="config-item">
                            <span class="config-label">Experiment Name:</span>
                            <span class="config-value">Search NDCG Experiment</span>
                        </div>
                        <div class="config-item">
                            <span class="config-label">Experiment Description:</span>
                            <span class="config-value">Evaluating search result quality using NDCG metrics for better ranking performance</span>
                        </div>
                    </div>

                    <div class="config-section">
                        <h4>Labeling Data</h4>
                        <div class="config-item">
                            <span class="config-label">Data Schema:</span>
                            <span class="config-value">Search</span>
                        </div>
                        <div class="config-item">
                            <span class="config-label">Data Source:</span>
                            <span class="config-value">Real-time scraping</span>
                        </div>
                        <div class="config-item">
                            <span class="config-label">Query Set Selection:</span>
                            <span class="config-value">Upload query set</span>
                        </div>
                        <div class="config-item">
                            <span class="config-label">Query Set File:</span>
                            <span class="config-value">search_queries_2024.csv (247 queries)</span>
                        </div>
                        <div class="config-item">
                            <span class="config-label">Control Profile:</span>
                            <span class="config-value">userp</span>
                        </div>
                        <div class="config-item">
                            <span class="config-label">Treatment Profile:</span>
                            <span class="config-value">copilot web</span>
                        </div>
                        <div class="config-item">
                            <span class="config-label">Data Fields Display:</span>
                            <span class="config-value">Query, Response, LU Info Question</span>
                        </div>
                    </div>

                    <div class="config-section">
                        <h4>Judgement Questions</h4>
                        <div class="config-item">
                            <span class="config-label">Question 1:</span>
                            <span class="config-value">Item relevance (Toggle - Item Level Side-by-Side)</span>
                        </div>
                        <div class="config-item">
                            <span class="config-label">Question 2:</span>
                            <span class="config-value">Which side is better? (Single Choice - Query Level Side-by-Side)</span>
                        </div>
                        <div class="config-item">
                            <span class="config-label">Question 3:</span>
                            <span class="config-value">Comment (Text Box - Query Level Side-by-Side)</span>
                        </div>
                    </div>

                    <div class="config-section">
                        <h4>Additional Settings</h4>
                        <div class="config-item">
                            <span class="config-label">Blind Test:</span>
                            <span class="config-value">Enabled</span>
                        </div>
                        <div class="config-item">
                            <span class="config-label">Allow Any to Judge:</span>
                            <span class="config-value">Enabled</span>
                        </div>
                        <div class="config-item">
                            <span class="config-label">Judgement Guide:</span>
                            <span class="config-value">Configured (Markdown format)</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>

    </div>

    <script src="experiment-detail.js"></script>
</body>
</html>
